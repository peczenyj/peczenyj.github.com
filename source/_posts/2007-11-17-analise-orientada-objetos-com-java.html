---
layout: post
title: "Analise Orientada a Objetos com Java - Parte 1"
date: 2007-11-17T15:02:00-03:00
categories:
 - Java
---

<div class='post'>
Estes dias eu me deparei com um problema bem interessante: uma forma de atribuir professores a disciplinas por meio de um sistema feito em Java. <br /><br />Já aviso, estou tentando aprender e achei este exemplo interessante. Este post é uma tentativa de análise orientada à objetos feita de forma progressiva, comentários são bem vindos.<br /><br />A primeira proposta foram 2 matrizes bidimensionais, uma com os professores disponíveis naquele dia e outra com as turmas, distribuidas ao longo de uma semana. Eu logo percebi que isso podia ser um problema de modelagem, pois se vc vai utilizar matrizes, paineis, interface textual ou seja lá o que for, isto é apenas uma camada - <span style="font-weight:bold;">a visão</span>. Um modelo muito mais rico pode ser criado, vejamos este exemplo em Java:<br /><br /><pre><code>class Professor{}<br />class Disciplina{}<br />class Turma{<br /> Disciplina disciplina;<br /> Professor  professor;<br />}<br />public class Main{<br /> public static void main(String[] args) {<br />  Professor  oseias     = new Professor();<br />  Disciplina matematica = new Disciplina();<br />  Turma matA = new Turma();<br />  <br />  matA.disciplina = matematica;<br />  matA.professor  = oseias;<br /> }<br />}</code></pre><br /><br />A minha classe <span style="font-weight:bold;">Main </span>mostra como seriam as operações sobre estas 3 classes. Basicamente eu tenho uma classe <span style="font-weight:bold;">Professor</span>, uma classe <span style="font-weight:bold;">Disciplina </span>e uma classe <span style="font-weight:bold;">Turma</span>. Se vc observarem qualquer instituição de ensino vão perceber que uma turma tem-um professor e tem-uma disciplina associados (<span style="font-style:italic;">composição</span>).<br /><br />Percebam também que eu não fui até uma escola ou universidade e fiquei horas levantando requisitos, criado diagramas uml ou documentos no word - apenas criei uma casca inicial de código (cheio de problemas por sinal). Também não me importo, ainda, com nenhum aspecto <span style="font-style:italic;">temporal</span>. Sem falar que esta escola todos os professores podem dar qualquer disciplina - agora vamos implementar direito.<br /><br />Vejamos... uma turma não troca de disciplina facilmente, mas de professor sim. Faz sentido, então, ter um setter de professor e um construtor que receba uma disciplina. Outra coisa, eu não defini nada nas outras classes, então está na hora de definir 2 atributos : id (numérico) e nome (String). Vou diferenciar os objetos pelo código, isto é, o seu id, e o nome será utilizado como descrição. Vou sobreescrever os métodos equals e toString.<br /><br />Como o nome desses objetos é importante, vou coloca-los no construtor também (assim como o id).<br /><br /><pre><code>class Professor{<br /> long id;<br /> private String nome;<br /> public Professor(long id,String nome){<br />  this.id = id;<br />  this.nome = nome;<br /> }<br /> public long getId(){ return id; }<br /> public String toString(){ return this.nome ; }<br /> public boolean equals(Object o){<br />  boolean test = false;<br /><br />  if (!(o instanceof Professor))<br />   test = super.equals(o);<br />  else <br />   test = ((Professor) o).getId() == this.id; <br />  return test;<br /> } <br />}<br />class Disciplina{<br /> long id;<br /> private String nome;<br /> public Disciplina(long id,String nome){<br />  this.id = id;<br />  this.nome = nome;<br /> }<br /> public long getId(){ return id; }<br /> public String toString(){ return this.nome ; }<br /> public boolean equals(Object o){<br />  boolean test = false;<br /><br />  if (!(o instanceof Disciplina))<br />   test = super.equals(o);<br />  else <br />   test = ((Disciplina) o).getId() == this.id; <br />  return test;<br /> }<br />}<br />class Turma{<br /> long id;<br /> private String nome;<br /> private Disciplina disciplina;<br /> private Professor  professor;<br /> public Turma(long id, String nome,Disciplina disciplina){<br />  this.id = id;<br />  this.nome = nome;<br />  this.disciplina = disciplina;<br /> }<br /> public void setProfessor(Professor  professor){<br />  this.professor = professor;<br /> }<br /> public long getId(){ return id; }<br /> public String toString(){ <br />  return this.nome + " [" + this.disciplina <br />         + "] c/ " + this.professor ; <br /> }<br /> public boolean equals(Object o){<br />  boolean test = false;<br /><br />  if (!(o instanceof Turma))<br />   test = super.equals(o);<br />  else <br />   test = ((Turma) o).getId() == this.id; <br />  return test;<br /> } <br />}<br />public class Main {<br /> public static void main(String[] args) {<br />  /* objetos bem comportados */<br />  Professor  oseias     = new Professor(1L,"Oseias");<br />  Disciplina matematica = new Disciplina(1L,"Matematica");<br />  Turma matA = new Turma(1L,"Matematica A", matematica);<br />  matA.setProfessor(oseias); <br />  <br />  System.out.println("Professor  " + oseias);    <br />  System.out.println("Disciplina " + matematica);  <br />  System.out.println("Turma      " + matA);<br />  <br />  /* objetos mal comportados <br />   * Sujeitos a NullPointerException    */<br />  Professor juca = new Professor(2L,null);<br />  Disciplina calculo = new Disciplina(2L,null);<br />  Turma matB = new Turma(2L,"Matematica B", null);<br />  matB.setProfessor(null); // nem precisava mas...<br />  Turma matC = new Turma(3L,"Matematica C",calculo);  <br />  Turma matD = new Turma(4L,"Matematica D",calculo);<br />  matD.setProfessor(juca);<br />  <br />  System.out.println("Juca?   " + juca);<br />  System.out.println("Calculo?" + calculo);<br />  System.out.println("matB?   " + matB);  <br />  System.out.println("matC?   " + matC);<br />  System.out.println("matD?   " + matD);<br /> }<br />}</pre></code><br /><br />Mas que raios eu estou fazendo? veja a saída desse programa:<br /><br /><pre>Professor  Oseias<br />Disciplina Matematica<br />Turma      Matematica A [Matematica] c/ Oseias<br />Juca?   null<br />Calculo?null<br />matB?   Matematica B [null] c/ null<br />matC?   Matematica C [null] c/ null<br />matD?   Matematica D [null] c/ null</pre><br /><br />Qual o significado? Bom... eu tenho uma forma razoavel de representar um professor, disciplina e turma, porém não é pratico, o construtor está gigante e, em muitas situações, eu posso ter parâmetros nulos, o que pode ser uma fonte de problemas. Existem muitas formas de refatorar estas classes, eu nem toquei no <a href="http://blog.caelum.com.br/2006/09/04/ensinando-que-e-o-hashcode/">HashCode</a>, enfim, tem muito pano pra manga. <br /><br />Apresento a vcs o desenvolvimento em etapas, iterativo. Eu estou chutando requisitos aos poucos, é verdade, mas eu entrego um codigo testável e completo e cada ciclo. Com os usuarios testando esse código (nesse caso, uma API, mas enfim...)  eu obtenho um feedback interessante. O que vc acha?</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>NetWalker</div>
<div class='content'>
Saudações, sir Peczenyj. :)<BR/>Muito boa a abordagem da análise.<BR/>Java, como sempre, usual e prático no que diz respeito a conceitos de orientação a objeto (a não ser herança múlt... ops, heim? alguém disse algo? ah bom... :D ). <BR/>Pois bem, quero ver a segunda parte pra descobrir o que pretende com esses construtores.<BR/>No mais, já que Professores e Disciplinas são apenas referenciados em Turmas, e têm a sua existência independente destas, ainda acredito que a relação seria uma Agregação. E não Composição, como citou.<BR/>Voltando... Vc descreveu o problema como possuindo o objetivo de atribuir professores às disciplinas. Tem alguma restrição ou regra geral que o problema define e pretende seguir (disponibilidade, horários, etc)? Ou continuará o foco em relacionar professores e disciplinas sem maiores restrições?<BR/>Então é isso, continue o bom trabalho de sempre.<BR/>Abraço.<BR/>Até +.</div>
</div>
<div class='comment'>
<div class='author'>Marcio</div>
<div class='content'>
Eu acho que você deveria usar um problema mais complexo como exemplo e ver se isso realmente funciona. Seu exemplo é bem simples e todo mundo conhece o domínio (estou deduzindo que você estudou e fez faculdade :))<BR/><BR/>Acho que não é necessário coletar todos os requisitos possíveis e modelar todos os detalhes do sistema, mas é quase obrigatório um estudo do domínio e um design, nem que seja um rascunho, do sistema. Os outros detalhes surgirão com a implementação. :)<BR/><BR/>[]'s</div>
</div>
</div>
