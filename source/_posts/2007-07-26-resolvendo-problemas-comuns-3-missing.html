---
layout: post
title: "Resolvendo Problemas Comuns 3 - missing separator"
date: 2007-07-26T11:44:00-03:00
categories:
 - Shell
---

<div class='post'>
O <a href="http://www.gnu.org/software/make/manual/make.html">make </a>é um comando incrivelmente poderoso, principalmente para programadores, permitindo que tarefas sejam organizadas de acordo com dependências, por exemplo.<br /><br />Um caso básico seria <span style="font-style:italic;">construir </span>um grande programa, composto de diversos arquivos-fonte.  O Makefile permite que vc <span style="font-style:italic;">compile </span>apenas os arquivos que vc alterou desde o ultimo <span style="font-style:italic;">build</span>, por exemplo, comparando o <span style="font-style:italic;">timestamp </span>do fonte com o codigo objeto gerado.<br /><br />Bom, ai um Makefile poderoso foi editado num editor de texto profissional e, na hora de testar, nos deparamos com:<br /><pre><code>$ make    <br />Makefile:3: *** missing separator (did you mean TAB instead of 8 spaces?).  Stop.<br /><br />$ cat Makefile   # nome padrão de arquivo para o make.<br /># um makefile comum<br />all:<br />        @echo "oi mundo"</code></pre><br /><br />Puxa, parece tudo certo... entretanto ai vai um pequeno detalhe: para cada <span style="font-style:italic;">target</span> do makefile, os comandos que vem a seguir devem começar por um TAB (alias a mensagem de erro é bem clara nesse sentido, certo?). Vamos conferir:<br /><br /><pre><code>$ cat -A Makefile   # é mais pontente que o -v<br /># um makefile comum$<br />all:$<br />        @echo "oi mundo"$</code></pre><br /> <br />Tcharam! Se a linha do echo iniciasse com um TAB, como deveria ser, apareceria um ^I no inicio da linha. Provavelmente a origem disso é um editor de texto que transforma os TABS em 8 espaços por questões estéticas. Vamos corrigir o Makefile?<br /><br /><pre><code>$ sed  -i 's/^\ \{8\}/\t/' Makefile<br />$ cat -A Makefile<br /># um makefile comum$<br />all:$<br />^I@echo "oi mundo"$<br />$ make<br />oi mundo</code></pre><br /><br />Pronto, basta substituir os espaços por TAB. Outra solução corrigir em um editor de textos mas sem a opção de expansão dos TABs -- no vim basta fazer<br /><br /><pre>:set noexpandtab</pre><br /><br />e editar numa boa.</div>
