function WeboFirstPartyCookieManager(e){console.log("config:",e);var t=function(){var e=navigator.cookieEnabled?!0:!1,t=navigator.userAgent.toLowerCase(),n=t.indexOf("msie")!==-1||t.indexOf("trident")!==-1,r="__wtestcookie";if(navigator.cookieEnabled===undefined||n)document.cookie=r,e=document.cookie.indexOf(r)!==-1?!0:!1;return e},n=t(),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@-",i=function(e){return Math.floor(Math.random()*e)},s=new Date(0),o=function(e,t,n,r,i,s,o){var u=e+"="+escape(t)+(n?"; expires="+n.toGMTString():"")+(r?"; path="+r:"")+(i?"; domain="+i:"")+(s?"; secure":"")+(o?"; SameSite="+o:"");console.log("setCookie",u),document.cookie=u},u=function(){var e,t,n="__wtest_top_domain",r=n,u=document.location.hostname.split(".");while(document.cookie.indexOf(r)>-1)r=n+i(1e5);for(e=u.length-2;e>=0;e--){t=u.slice(e).join("."),o(r,1,null,null,t);if(document.cookie.indexOf(r)>-1)return o(r,"",s,null,t),t}},a=null,f=function(e,t,n,r,i,s,f){i==="auto"&&(a==null&&(a=u()),i=a),o(e,t,n,r,i,s,f)},l=function(e,t,n){return e!=null&&e.hasOwnProperty(t)?e[t]:n},c="cookie",h=l(e,c+"Name","AFFICHE_C"),p=l(e,c+"TTL",7776e6),d=l(e,c+"Path","/"),v=l(e,c+"Domain","auto"),m=l(e,c+"Secure",!1),g=l(e,c+"SameSite","Strict"),y=l(e,"shouldRefreshCookie",!1),b=l(e,"firstPartyIDQueryArg","first_party_id"),w=function(e){var t=e+"=",n=t.length,r=document.cookie.length,i=0;while(i<r){var s=i+n;if(document.cookie.substring(i,s)==t){var o=s,u=document.cookie.indexOf(";",o);return u==-1&&(u=document.cookie.length),unescape(document.cookie.substring(o,u))}i=document.cookie.indexOf(" ",i)+1;if(i==0)break}return null},E=function(e){var t=new Date;t.setTime(t.getTime()+p),f(h,e,t,d,v,m,g)},S=function(){f(h,"",s,d,v,m,g)},x=function(){console.log("getting cookie");var e=w(h);if(e==null)return null;if(e.length!=14)return console.log("bad cookie size, expect 14 got: "+e.length),S(),null;var t=e.charAt(0);if(t=="@"||t=="!"||t=="_")return console.log("not a regular weborama id: "+e),S(),null;var n=new RegExp("[^"+r+"]");return n.test(e)?(console.log("find unexpected chars in weborama id: "+e),S(),null):e},T=function(){var e=[],t=i(256);while(t>=248&&t<=251)t=i(256);e[0]=t;for(p=1;p<8;p++)e[p]=i(256);e[8]=t;var n="",s=r,o,u,a,f,l,c,h,p=0;while(p<e.length)o=e[p++],u=e[p++],a=e[p++],f=o>>2,l=(o&3)<<4|u>>4,c=(u&15)<<2|a>>6,h=a&63,n=n+s.charAt(f)+s.charAt(l)+s.charAt(c)+s.charAt(h);return n+String.fromCharCode(i(9)+49)+String.fromCharCode(i(10)+48)};this.getFirstPartyCookie=function(){if(!n)return console.log("cookie not enable, skip"),null;var e=x();return e==null?(console.log("cookie not found, generate and store it"),e=T(),E(e)):y&&(console.log("refresh existing cookie"),E(e)),e!=null&&console.log("using first party cookie: "+e),e},this.executeCallback=function(e){var t=this.getFirstPartyCookie();e(t,n,v)},this.decorateURL=function(e){var t=e.indexOf("?")>0?"&":"?",n=this.getFirstPartyCookie();return n!=null&&(e+=t+b+"="+n),e}}var f=window,cmpFrame,level_up=0;while(!cmpFrame){try{f.frames.__cmpLocator&&(cmpFrame=f)}catch(e){}if(f===window.top)break;level_up++,f=f.parent}if(level_up&&cmpFrame){var cmpCallbacks={};window.__cmp=function(e,t,n){var r=Math.random()+"",i={__cmpCall:{command:e,parameter:t,callId:r}};cmpCallbacks[r]=n,cmpFrame.postMessage(i,"*")},window.addEventListener("message",function(e){var t;try{t=typeof e.data=="string"?JSON.parse(e.data):e.data}catch(n){}if(t&&t.__cmpReturn){var r=t.__cmpReturn;cmpCallbacks[r.callId](r.returnValue,r.success),delete cmpCallbacks[r.callId]}},!1)}window.wamf=function(){return{version:"20200331_01",firstPartyCookieConf:{},enableFirstPartyCookie:!1,firstPartyCookieManager:null,account:function(e){typeof e=="string"&&/^\d+$/.test(e)===!0?this.account=e:this.account=""},querytyp:function(e){typeof e=="string"&&/^\d+$/.test(e)===!0?this.typ=e:this.typ=""},enableFirstParty:function(e){this.enableFirstPartyCookie=e},firstPartConf:function(e){this.firstPartyCookieConf=e},eventkey:function(e){typeof e=="string"?this.ekey=e:this.ekey=""},eventvalue:function(e){typeof e=="string"?this.evalue=e:this.evalue=""},pushWvar:function(z){"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o,u=gap,a=t[e];switch(a&&"object"==typeof a&&"function"==typeof a.toJSON&&(a=a.toJSON(e)),"function"==typeof rep&&(a=rep.call(t,e,a)),typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(a)){for(s=a.length,n=0;s>n;n+=1)o[n]=str(n,a)||"null";return i=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+u+"]":"["+o.join(",")+"]",gap=u,i}if(rep&&"object"==typeof rep)for(s=rep.length,n=0;s>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],i=str(r,a),i&&o.push(quote(r)+(gap?": ":":")+i));else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&o.push(quote(r)+(gap?": ":":")+i));return i=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+u+"}":"{"+o.join(",")+"}",gap=u,i}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();if(z.constructor===Array){function unique(e){var t=[],n=e.length;for(var r=0;r<n;r++){for(var i=r+1;i<n;i++)e[r]===e[i]&&(i=++r);t.push(e[r])}return t}if(z[0].match(/(.*):(.*)/)===null){var Wvartmp=[],Wstrtmp="",Wn=0;for(Wn=0;Wn<z.length;Wn++)Wn%2===1?(Wstrtmp+=z[Wn],Wvartmp.push(Wstrtmp)):Wstrtmp=z[Wn]+":";z=Wvartmp}z=unique(z),z.sort();var Wkeys=[],Wkk=[],Wvv=[],Wkeysp="",Wvarstr="",Wvarval="",Wcountval=0,Wi=0,Wj=0;e:for(Wi=0;Wi<z.length;Wi++){Wkk=z[Wi].match(/(.*):/);while(Wkk[1].indexOf(":")>0)Wkktmp=Wkk[1].match(/(.*):/),Wkk[1]=Wkktmp[1];for(var Wj=0;Wj<Wkeys.length;Wj++)if(Wkeys[Wj]==Wkk[1])continue e;Wkeys.push(Wkk[1])}for(Wi=0;Wi<Wkeys.length;Wi++){Wi==0?Wvarstr='{"'+Wkeys[Wi]+'":':Wvarstr+='"'+Wkeys[Wi]+'":',Wkeysp="",Wvarval="",Wcountval=0;for(Wj=0;Wj<z.length;Wj++){Wkk=z[Wj].match(/(.*):/);while(Wkk[1].indexOf(":")>0)Wkktmp=Wkk[1].match(/(.*):/),Wkk[1]=Wkktmp[1];Wvv=z[Wj].match(/:(.*)/),Wkeysp=Wkk[1],Wkeysp==Wkk[1]&&Wkk[1]==Wkeys[Wi]&&(Wvarval==""?Wvarval='"'+Wvv[1]+'"':(Wvarval+=',"'+Wvv[1]+'"',Wcountval++))}Wcountval>0&&(Wvarval="["+Wvarval+"]"),Wi+1==Wkeys.length?Wvarstr+=Wvarval+"}":Wvarstr+=Wvarval+","}this.Wvar=JSON.parse(Wvarstr)}else this.Wvar=z},_decorateURL:function(e){return this.enableFirstPartyCookie?(this.firstPartyCookieManager==null&&(this.firstPartyCookieManager=new WeboFirstPartyCookieManager(this.firstPartyCookieConf)),this.firstPartyCookieManager.decorateURL(e)):e},_create_element_of_given_type:function(e,t){t=this._decorateURL(t);if(e=="image"){var n=new Image;n.src=t,n.onload=function(){return}}else{var n=document.createElement("iframe");n.setAttribute("id","Wifrm"),document.body.appendChild(n),n.setAttribute("src",t),n.setAttribute("style","height: 1px; width: 1px; border: 0px none; position: absolute; display: none; left: 0px; top: 0px; z-index: 0;")}},send_after_cmp_check:function(e,t){if(typeof window.__cmp=="function"){var n=this;window.__cmp("getConsentData",null,function(r,i){t+=t.indexOf("?")==-1?"?":"&",i?r.gdprApplies?t+="gdpr=1&gdpr_consent="+(r.consentData||""):t+="gdpr=0":t+="gdpr=1&gdpr_cmp_failure=1",n._create_element_of_given_type(e,t)})}else this._create_element_of_given_type(e,t)},pageSend:function(){var e,t;typeof this.Wvar!="object"?e={}:e=this.Wvar;if(this.account!=""&&this.typ!=""){e.wamid=this.account,e.typ=this.typ,e.url=encodeURIComponent(document.URL),e.ref=encodeURIComponent(document.referrer),WvarPageStr=encodeURIComponent(JSON.stringify(e)),WvarPageStr.length>1900&&(e.ref="",WvarPageStr=encodeURIComponent(JSON.stringify(e)));var n="wf";2510==this.account?n="lbcwf":6949==this.account&&(n="wf-ru"),this.send_after_cmp_check("image","https://"+n+".frontend-preprod.weborama.fr/stream?wamid="+this.account+"&Wvar="+WvarPageStr+"&d.r="+(new Date).getTime())}},eventSend:function(e,t,n,r){window.wamf.querytyp(e),window.wamf.eventkey(t),window.wamf.eventvalue(n),typeof this.Wvar!="object"?WvarEvent={}:WvarEvent=this.Wvar;if(this.account!=""&&this.typ!=""&&this.ekey!=""&&this.evalue!=""){WvarEvent.wamid=this.account,WvarEvent.typ=this.typ,WvarEvent[this.ekey]=this.evalue,WvarEvent.url=encodeURIComponent(document.URL),WvarEvent.ref=encodeURIComponent(document.referrer),WvarEventStr=encodeURIComponent(JSON.stringify(WvarEvent)),WvarEventStr.length>1900&&(WvarEvent.ref="",WvarEventStr=encodeURIComponent(JSON.stringify(WvarEvent)));var i="wf";2510==this.account?i="lbcwf":6949==this.account&&(i="wf-ru"),this.send_after_cmp_check("image","https://"+i+".frontend-preprod.weborama.fr/stream?wamid="+this.account+"&Wvar="+WvarEventStr+"&d.r="+(new Date).getTime())}},sync:function(e){e!=0&&this.send_after_cmp_check("iframe","http"+("https:"==document.location.protocol?"s":"")+"://cstatic.weborama.fr/iframe/preprod/"+(2==e?"external":"external_ids_sync")+".html?d.r="+(new Date).getTime())},data:[],push:function(e,t){this.data.push(e.toString()),this.data.push(t.toString())},send:function(){window.wamf.pushWvar(this.data),window.wamf.pageSend()}}}(),typeof window.wamf_callback=="undefined"&&(typeof wamid=="undefined"&&(wamid=""),typeof typ=="undefined"&&(typ="1"),typeof Wvar=="undefined"&&(Wvar=""),typeof Wsync=="undefined"&&(Wsync=1),window.wamf.account(wamid),window.wamf.querytyp(typ),typeof WfirstParty!="undefined"&&window.wamf.enableFirstParty(!!WfirstParty),typeof WfirstPartyConf!="undefined"&&window.wamf.firstPartConf(WfirstPartyConf),window.wamf.pushWvar(Wvar),window.wamf.pageSend(),window.wamf.sync(Wsync)),typeof window.wamf_callback=="function"&&(window.wamf_callback(),window.wamf_callback=function(){window.wamf.querytyp("1"),window.wamf.sync(2)});